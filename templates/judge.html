<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>判定フォーム</title>
</head>
<body>
    <h1>判定フォーム</h1>
    {% for user_id, data in users.items() %}
        <div style="border:1px solid #000; margin:10px; padding:10px;">
            <p><b>User:</b> {{ user_id }}</p>
            <p><b>Stage:</b> {{ data.stage }}</p>

            <h3>履歴</h3>
            {% for h in data.history %}
                <p>Stage {{h.stage}}</p>
                <img src="/{{h.image}}" width="200">
            {% endfor %}

            <h3>最新画像</h3>
            {% if data.pending_image %}
                <img src="/{{data.pending_image}}" width="300"><br>
                {% if data.stage == 5 %}
                    <a href="/judge/{{user_id}}/correct1">正解1</a> |
                    <a href="/judge/{{user_id}}/correct2">正解2</a> |
                    <a href="/judge/{{user_id}}/wrong">不正解</a>
                {% elif data.stage == 6 %}
                    <a href="/judge/{{user_id}}/correct">正解</a> |
                    <a href="/judge/{{user_id}}/wrong">不正解</a>
                {% else %}
                    <a href="/judge/{{user_id}}/correct">正解</a> |
                    <a href="/judge/{{user_id}}/wrong">不正解</a>
                {% endif %}
            {% else %}
                <p>まだ画像なし</p>
            {% endif %}
        </div>
    {% endfor %}
</body>
</html>
